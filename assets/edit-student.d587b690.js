import{a as I,s as U,d as m,Q as k}from"./auth.27c9e4d6.js";import{d as P,_ as q,J as h,G as u,P as p,R as f,O as i,j as s,K as l,F as _,ae as F,H as r,L as b,Q as c,M as S,ab as v,bg as $,aZ as L}from"./index.e88ad099.js";import{Q as w}from"./QItemLabel.ef0548aa.js";import{Q as A}from"./QForm.847ae6d4.js";import{a as N,Q as M}from"./QTable.f567dba6.js";import{Q as T}from"./QTr.936fc6fd.js";import{Q as B}from"./QTd.ab105d49.js";import{Q as R}from"./QBtnGroup.6f902bd4.js";import{u as G}from"./vue-i18n.c257f8c9.js";import{E as j,C as H,S as J,t as K,a as O,b as Z}from"./student-course-tab-view.e518dcf1.js";import{w as z}from"./working-component.e4cdcfd2.js";import"./axios.21178db7.js";import"./index.31a62591.js";import"./_commonjsHelpers.4e997714.js";import"./QList.2701078e.js";import"./QSelect.9edcaa34.js";import"./QField.62c1a422.js";import"./selection.dc814625.js";import"./fees-printable.b6257933.js";import"./QSpace.dac1a6e3.js";import"./QImg.4d61fa2a.js";import"./QTabPanels.08ca7d8f.js";import"./QResizeObserver.3cb90529.js";import"./touch.9135741d.js";import"./use-render-cache.3aae9b27.js";import"./QCircularProgress.85675cf4.js";const W=P({name:"editStudentCourses",data(){const e=I(),o=U(),{locale:C,t:d}=G({useScope:"global"});return{t:d,locale:C,authS:e,studentsS:o,columns:[{label:d("Course"),name:"course",align:"left",sortable:!0,field:n=>{var y;return(y=n==null?void 0:n.course)==null?void 0:y.name}},{label:d("Group"),name:"group",align:"left",sortable:!0,field:n=>n==null?void 0:n.group},{label:d("Status"),name:"status",align:"left",sortable:!0,field:n=>n!=null&&n.active?d("Active"):d("Not Active")},{label:d("Fees"),name:"Fees",align:"left",sortable:!0,field:n=>n==null?void 0:n.fees},{label:d("Remaining Fees"),name:"remaining fees",align:"left",sortable:!0,field:n=>n==null?void 0:n.remaining_fees}],showSubscriptionDialog:!1,selectedCourse:null}},components:{EditSubscriptionDialog:j,CreateFeesTransaction:H}}),X={key:3},Y={key:4};function x(e,o,C,d,n,y){var g;const V=h("EditSubscriptionDialog"),Q=h("CreateFeesTransaction");return u(),p("div",null,[f("h5",null,i(e.t("Courses")),1),s(M,{rows:(g=e.studentsS.student)==null?void 0:g.student_courses,columns:e.columns,loading:e.studentsS.working},{header:l(a=>[s(T,{props:a},{default:l(()=>[(u(!0),p(_,null,F(a.cols,t=>(u(),r(N,{key:t.name,props:a,class:"text-bold text-primary"},{default:l(()=>[b(i(t.label),1)]),_:2},1032,["props"]))),128)),s(N,{"auto-width":""})]),_:2},1032,["props"])]),body:l(a=>[e.authS.hasCourse(a.row.course.id)==!0?(u(),r(T,{key:0,props:a},{default:l(()=>[(u(!0),p(_,null,F(a.cols,t=>(u(),r(B,{key:t.name,props:a},{default:l(()=>[b(i(t.value),1)]),_:2},1032,["props"]))),128)),s(B,{"auto-width":""},{default:l(()=>[s(R,null,{default:l(()=>[e.studentsS.showEditSubscriptionDialog?S("",!0):(u(),r(c,{key:0,label:e.t("Edit"),color:"primary",onClick:t=>{e.studentsS.selectedSubscription=a.row,e.studentsS.showEditSubscriptionDialog=!0}},null,8,["label","onClick"])),s(c,{label:e.t("New Payment"),color:"primary",onClick:t=>{e.studentsS.selectedSubscription=a.row,e.studentsS.showCreateFeesDialog=!0}},null,8,["label","onClick"]),a.row.active?(u(),r(c,{key:1,label:e.t("deactivate"),color:"negative",onClick:t=>{e.studentsS.selectedSubscription=a.row,e.studentsS.deactivateConfirm()}},null,8,["label","onClick"])):(u(),r(c,{key:2,label:e.t("activate"),color:"primary",onClick:t=>{e.studentsS.selectedSubscription=a.row,e.studentsS.activateConfirm()}},null,8,["label","onClick"])),e.studentsS.selectedSubscription==a.row?(u(),p("div",X,[s(V,{modelValue:e.studentsS.showEditSubscriptionDialog,"onUpdate:modelValue":o[0]||(o[0]=t=>e.studentsS.showEditSubscriptionDialog=t)},null,8,["modelValue"])])):S("",!0),e.studentsS.selectedSubscription==a.row?(u(),p("div",Y,[s(Q,{modelValue:e.studentsS.showCreateFeesDialog,"onUpdate:modelValue":o[1]||(o[1]=t=>e.studentsS.showCreateFeesDialog=t)},null,8,["modelValue"])])):S("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])):S("",!0)]),_:1},8,["rows","columns","loading"])])}var ee=q(W,[["render",x]]);const te=P({components:{editStudentCourses:ee,workingComponent:z,StudentCourseTabView:J},computed:{student(){return K(this.studentsS.student)}},methods:{to_course:O,to_student_course:Z},data(){const{t:e}=G({useScope:"global"}),o=U();return{authS:I(),studentsS:o,t:e}},async mounted(){const e=this.$route.params.id;typeof e=="string"&&(await this.studentsS.getStudentById(parseInt(e)),this.studentsS.fillEditStudentFormFields())}}),se={key:1,class:"q-ma-md"},le={class:"q-mx-md text-h6"},ne=f("br",null,null,-1),oe=f("br",null,null,-1),ae=f("br",null,null,-1),ue={key:0};function de(e,o,C,d,n,y){var a;const V=h("workingComponent"),Q=h("editStudentCourses"),g=h("StudentCourseTabView");return e.studentsS.working?(u(),r(V,{key:0})):(u(),p("div",se,[f("div",le,i(e.t("Edit Student")),1),e.studentsS.student!=null?(u(),r(A,{key:0,class:"q-ma-md"},{default:l(()=>[s(k,{style:{width:"500px"}},{default:l(()=>[s(m,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(i(e.t("Mobile"))+":",1)]),_:1}),s(m,null,{default:l(()=>[s(w,{class:"text-black text-bold"},{default:l(()=>[s(v,{outlined:"",modelValue:e.studentsS.phoneNumber,"onUpdate:modelValue":o[0]||(o[0]=t=>e.studentsS.phoneNumber=t),dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(k,{style:{width:"500px"}},{default:l(()=>[s(m,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(i(e.t("Parent Phone Number"))+" :",1)]),_:1}),s(m,null,{default:l(()=>[s(w,{class:"text-black text-bold"},{default:l(()=>[s(v,{outlined:"",dense:"",class:"full-width",modelValue:e.studentsS.parentPhoneNumber,"onUpdate:modelValue":o[1]||(o[1]=t=>e.studentsS.parentPhoneNumber=t),placeholder:"parent phone number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s($,{inset:""}),s(k,{style:{width:"500px"}},{default:l(()=>[s(m,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(i(e.t("Name"))+":",1)]),_:1}),s(m,null,{default:l(()=>[s(w,{class:"text-black text-bold"},{default:l(()=>[s(v,{modelValue:e.studentsS.name,"onUpdate:modelValue":o[2]||(o[2]=t=>e.studentsS.name=t),outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s($,{inset:""}),s(k,{style:{width:"500px"}},{default:l(()=>[s(m,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(i(e.t("Barcode"))+":",1)]),_:1}),s(m,null,{default:l(()=>[s(w,{class:"text-black text-bold"},{default:l(()=>[s(v,{modelValue:e.studentsS.barcode,"onUpdate:modelValue":o[3]||(o[3]=t=>e.studentsS.barcode=t),type:"number",outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),s($,{inset:""}),ne,s(c,{class:"full-width",label:e.t("save"),color:"primary",onClick:o[4]||(o[4]=t=>e.studentsS.confirmUpdateStudent())},null,8,["label"]),oe,ae,s(Q)]),_:1})):S("",!0),(u(!0),p(_,null,F((a=e.studentsS.student)==null?void 0:a.student_courses,t=>(u(),r(L,{key:t==null?void 0:t.id,class:"q-ma-md p-pa-md"},{default:l(()=>{var D,E;return[t!=null&&t.course!=null&&e.authS.hasCourse((D=t==null?void 0:t.course)==null?void 0:D.id)?(u(),p("div",ue,[f("h5",null,i((E=t==null?void 0:t.course)==null?void 0:E.name),1),s(g,{course:e.to_course(t==null?void 0:t.course),student:e.student,subscription:e.to_student_course(t)},null,8,["course","student","subscription"])])):S("",!0)]}),_:2},1024))),128))]))}var Ue=q(te,[["render",de]]);export{Ue as default};
