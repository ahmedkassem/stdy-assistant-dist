import{Q as x}from"./QCircularProgress.85675cf4.js";import{Q as k}from"./QBadge.133620b1.js";import{_ as g,d as _,G as i,P as u,j as n,R as s,O as m,L as d,K as l,ab as S,H as y,Q as h}from"./index.e88ad099.js";import{Q as w}from"./QTable.f567dba6.js";import{c as A,s as C,e as V}from"./auth.27c9e4d6.js";import{c as Q,l as v,a as $,e as B}from"./exam-answers.e5f7b2d2.js";import{a as L}from"./axios.21178db7.js";import"./QList.2701078e.js";import"./QSelect.9edcaa34.js";import"./QField.62c1a422.js";import"./QItemLabel.ef0548aa.js";import"./selection.dc814625.js";import"./vue-i18n.c257f8c9.js";import"./index.31a62591.js";import"./_commonjsHelpers.4e997714.js";import"./exam-question.3d01010e.js";const N=_({name:"show-exam",setup(){return{coursesS:Q(),lessonsS:v(),root:L.defaults.baseURL,examsS:$(),examAnswersS:B(),attendanceS:A(),studentsS:C(),studentColumns:[{name:"studentid",label:"student id",field(e){var t;return(t=e.student)==null?void 0:t.id},sortable:!0},{name:"name",label:"name",field(e){var t,a,o;return(o=(a=(t=e.student)==null?void 0:t.user)==null?void 0:a.profile)==null?void 0:o.name},sortable:!0},{name:"group",label:"group",field(e){return e.group},sortable:!0},{name:"phone",label:"phone",field(e){var t,a,o;return(o=(a=(t=e.student)==null?void 0:t.user)==null?void 0:a.profile)==null?void 0:o.phoneNumber},sortable:!0},{name:"score",label:"score"}],scoreColumns:[{name:"studentid",label:"student id",field(e){var t;return(t=e.student)==null?void 0:t.id},sortable:!0},{name:"name",label:"name",field(e){var t,a,o;return(o=(a=(t=e.student)==null?void 0:t.user)==null?void 0:a.profile)==null?void 0:o.name},sortable:!0},{name:"phone",label:"phone",field(e){var t,a,o;return(o=(a=(t=e.student)==null?void 0:t.user)==null?void 0:a.profile)==null?void 0:o.phoneNumber},sortable:!0},{name:"score",label:"score",field(e){return e.score},sortable:!0},{name:"percent",label:"percent",field(e){return e.percent},sortable:!0},{name:"actions",label:"actions"}]}},methods:{moment:V},async mounted(){var e,t;((e=this.examsS.exam)==null?void 0:e.id.toString())!=this.$route.params.id&&(await this.examsS.getOne(this.$route.params.id),await this.attendanceS.getAllLessonAttendance((t=this.examsS.exam)==null?void 0:t.lesson.id),await this.examAnswersS.getByOfflineExam(this.examsS.exam))}}),O={key:0,class:"q-pa-md"},P={key:1,class:"q-pa-md"},U=s("br",null,null,-1),q=["props"],E=s("td",null,null,-1),T=s("td",null,"press submit button to submit all scores",-1),z={key:1},I=s("br",null,null,-1),R=["props"];function j(e,t,a,o,D,G){var c,p,f;return e.examsS.exam==null||e.examsS.working?(i(),u("div",O,[n(x,{indeterminate:"",size:"50px",color:"primary",class:"q-ma-md fixed-center","z-index":"1000"})])):(i(),u("div",P,[s("h4",null,m(e.examsS.exam.course.name),1),s("h5",null,m(e.examsS.exam.lesson.title),1),s("h6",null,[d(m((c=e.examsS.exam)==null?void 0:c.name)+" ",1),n(k,null,{default:l(()=>[d("offline exam")]),_:1})]),s("b",null,"Total Score:"+m((p=e.examsS.exam)==null?void 0:p.total_score),1),U,s("b",null,"Pass Percent:"+m((f=e.examsS.exam)==null?void 0:f.pass_percent),1),n(w,{title:"students with attendance",rows:e.attendanceS.examLessonAttendance,columns:e.studentColumns,filter:e.attendanceS.filter},{"top-right":l(()=>[n(S,{class:"full-width",placeholder:"search",modelValue:e.attendanceS.filter,"onUpdate:modelValue":t[0]||(t[0]=r=>e.attendanceS.filter=r)},null,8,["modelValue"])]),"body-cell-score":l(r=>[s("div",{class:"row",props:r},[n(S,{type:"number",class:"full-width",placeholder:"score",modelValue:r.row.score,"onUpdate:modelValue":b=>r.row.score=b},null,8,["modelValue","onUpdate:modelValue"])],8,q)]),"bottom-row":l(()=>[s("tr",null,[E,T,s("td",null,[e.examAnswersS.working?(i(),u("div",z,"working")):(i(),y(h,{key:0,color:"primary",onClick:t[1]||(t[1]=r=>e.examAnswersS.bulkInsertOfflineScores())},{default:l(()=>[d("Submit")]),_:1}))])])]),_:1},8,["rows","columns","filter"]),I,n(w,{title:"students with score",rows:e.examAnswersS.scoredList,columns:e.scoreColumns},{"body-cell-actions":l(r=>[s("td",{props:r},[n(h,{color:"red",onClick:b=>e.examAnswersS.delete(r.row)},{default:l(()=>[d("remove")]),_:2},1032,["onClick"])],8,R)]),_:1},8,["rows","columns"])]))}var le=g(N,[["render",j]]);export{le as default};
