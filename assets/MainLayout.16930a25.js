import{k as Z,c as s,h as z,l as de,i as we,m as E,r as x,w as h,n as _e,p as He,g as ge,q as pe,u as Re,t as Ne,v as Ee,x as Ue,y as je,z as Ge,A as Ke,o as Je,B as ye,C as B,D as be,E as Xe,_ as Se,G as m,H as b,Q as qe,I as Ye,d as Ze,J as G,K as a,j as l,L as S,M as D,N as T,O as Q,P as et,R as tt,S as L}from"./index.e88ad099.js";import{Q as at}from"./QSpace.dac1a6e3.js";import{Q as lt}from"./QResizeObserver.3cb90529.js";import{b as Y,a as ie,c as ot,s as nt,Q as q,d as c}from"./auth.27c9e4d6.js";import{Q as ut}from"./QList.2701078e.js";import{T as se}from"./TouchPan.eb39ddbd.js";import{l as rt,Q as st,a as it}from"./login-form.021ee75d.js";import{u as Be}from"./vue-i18n.c257f8c9.js";import{w as dt}from"./working-component.e4cdcfd2.js";import{a as ct}from"./axios.21178db7.js";import"./index.31a62591.js";import"./_commonjsHelpers.4e997714.js";import"./touch.9135741d.js";import"./selection.dc814625.js";import"./QCircularProgress.85675cf4.js";var ft=Z({name:"QToolbarTitle",props:{shrink:Boolean},setup(e,{slots:y}){const v=s(()=>"q-toolbar__title ellipsis"+(e.shrink===!0?" col-shrink":""));return()=>z("div",{class:v.value},de(y.default))}}),vt=Z({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:y}){const v=s(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>z("div",{class:v.value,role:"toolbar"},de(y.default))}}),mt=Z({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:y,emit:v}){const{proxy:{$q:C}}=ge(),r=we(pe,E);if(r===E)return console.error("QHeader needs to be child of QLayout"),E;const k=x(parseInt(e.heightHint,10)),i=x(!0),M=s(()=>e.reveal===!0||r.view.value.indexOf("H")!==-1||C.platform.is.ios&&r.isContainer.value===!0),P=s(()=>{if(e.modelValue!==!0)return 0;if(M.value===!0)return i.value===!0?k.value:0;const n=k.value-r.scroll.value.position;return n>0?n:0}),H=s(()=>e.modelValue!==!0||M.value===!0&&i.value!==!0),o=s(()=>e.modelValue===!0&&H.value===!0&&e.reveal===!0),A=s(()=>"q-header q-layout__section--marginal "+(M.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(H.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),_=s(()=>{const n=r.rows.value.top,O={};return n[0]==="l"&&r.left.space===!0&&(O[C.lang.rtl===!0?"right":"left"]=`${r.left.size}px`),n[2]==="r"&&r.right.space===!0&&(O[C.lang.rtl===!0?"left":"right"]=`${r.right.size}px`),O});function w(n,O){r.update("header",n,O)}function f(n,O){n.value!==O&&(n.value=O)}function F({height:n}){f(k,n),w("size",n)}function g(n){o.value===!0&&f(i,!0),v("focusin",n)}h(()=>e.modelValue,n=>{w("space",n),f(i,!0),r.animate()}),h(P,n=>{w("offset",n)}),h(()=>e.reveal,n=>{n===!1&&f(i,e.modelValue)}),h(i,n=>{r.animate(),v("reveal",n)}),h(r.scroll,n=>{e.reveal===!0&&f(i,n.direction==="up"||n.position<=e.revealOffset||n.position-n.inflectionPoint<100)});const d={};return r.instances.header=d,e.modelValue===!0&&w("size",k.value),w("space",e.modelValue),w("offset",P.value),_e(()=>{r.instances.header===d&&(r.instances.header=void 0,w("size",0),w("offset",0),w("space",!1))}),()=>{const n=He(y.default,[]);return e.elevated===!0&&n.push(z("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),n.push(z(lt,{debounce:0,onResize:F})),z("header",{class:A.value,style:_.value,onFocusin:g},n)}}});const ke=150;var ht=Z({name:"QDrawer",inheritAttrs:!1,props:{...Re,...Ne,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...Ee,"onLayout","miniState"],setup(e,{slots:y,emit:v,attrs:C}){const r=ge(),{proxy:{$q:k}}=r,i=Ue(e,k),{preventBodyScroll:M}=Xe(),{registerTimeout:P,removeTimeout:H}=je(),o=we(pe,E);if(o===E)return console.error("QDrawer needs to be child of QLayout"),E;let A,_=null,w;const f=x(e.behavior==="mobile"||e.behavior!=="desktop"&&o.totalWidth.value<=e.breakpoint),F=s(()=>e.mini===!0&&f.value!==!0),g=s(()=>F.value===!0?e.miniWidth:e.width),d=x(e.showIfAbove===!0&&f.value===!1?!0:e.modelValue===!0),n=s(()=>e.persistent!==!0&&(f.value===!0||Te.value===!0));function O(t,u){if(Ce(),t!==!1&&o.animate(),$(0),f.value===!0){const p=o.instances[J.value];p!==void 0&&p.belowBreakpoint===!0&&p.hide(!1),W(1),o.isContainer.value!==!0&&M(!0)}else W(0),t!==!1&&ne(!1);P(()=>{t!==!1&&ne(!0),u!==!0&&v("show",t)},ke)}function ce(t,u){$e(),t!==!1&&o.animate(),W(0),$(R.value*g.value),ue(),u!==!0?P(()=>{v("hide",t)},ke):H()}const{show:ee,hide:U}=Ge({showing:d,hideOnRouteChange:n,handleShow:O,handleHide:ce}),{addToHistory:Ce,removeFromHistory:$e}=Ke(d,U,n),K={belowBreakpoint:f,hide:U},V=s(()=>e.side==="right"),R=s(()=>(k.lang.rtl===!0?-1:1)*(V.value===!0?1:-1)),fe=x(0),N=x(!1),te=x(!1),ve=x(g.value*R.value),J=s(()=>V.value===!0?"left":"right"),ae=s(()=>d.value===!0&&f.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:g.value:0),le=s(()=>e.overlay===!0||e.miniToOverlay===!0||o.view.value.indexOf(V.value?"R":"L")!==-1||k.platform.is.ios===!0&&o.isContainer.value===!0),j=s(()=>e.overlay===!1&&d.value===!0&&f.value===!1),Te=s(()=>e.overlay===!0&&d.value===!0&&f.value===!1),Qe=s(()=>"fullscreen q-drawer__backdrop"+(d.value===!1&&N.value===!1?" hidden":"")),Le=s(()=>({backgroundColor:`rgba(0,0,0,${fe.value*.4})`})),me=s(()=>V.value===!0?o.rows.value.top[2]==="r":o.rows.value.top[0]==="l"),Oe=s(()=>V.value===!0?o.rows.value.bottom[2]==="r":o.rows.value.bottom[0]==="l"),De=s(()=>{const t={};return o.header.space===!0&&me.value===!1&&(le.value===!0?t.top=`${o.header.offset}px`:o.header.space===!0&&(t.top=`${o.header.size}px`)),o.footer.space===!0&&Oe.value===!1&&(le.value===!0?t.bottom=`${o.footer.offset}px`:o.footer.space===!0&&(t.bottom=`${o.footer.size}px`)),t}),Ae=s(()=>{const t={width:`${g.value}px`,transform:`translateX(${ve.value}px)`};return f.value===!0?t:Object.assign(t,De.value)}),Me=s(()=>"q-drawer__content fit "+(o.isContainer.value!==!0?"scroll":"overflow-auto")),Ve=s(()=>`q-drawer q-drawer--${e.side}`+(te.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(i.value===!0?" q-drawer--dark q-dark":"")+(N.value===!0?" no-transition":d.value===!0?"":" q-layout--prevent-focus")+(f.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${F.value===!0?"mini":"standard"}`+(le.value===!0||j.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(me.value===!0?" q-drawer--top-padding":""))),xe=s(()=>{const t=k.lang.rtl===!0?e.side:J.value;return[[se,Pe,void 0,{[t]:!0,mouse:!0}]]}),ze=s(()=>{const t=k.lang.rtl===!0?J.value:e.side;return[[se,he,void 0,{[t]:!0,mouse:!0}]]}),We=s(()=>{const t=k.lang.rtl===!0?J.value:e.side;return[[se,he,void 0,{[t]:!0,mouse:!0,mouseAllDir:!0}]]});function oe(){Fe(f,e.behavior==="mobile"||e.behavior!=="desktop"&&o.totalWidth.value<=e.breakpoint)}h(f,t=>{t===!0?(A=d.value,d.value===!0&&U(!1)):e.overlay===!1&&e.behavior!=="mobile"&&A!==!1&&(d.value===!0?($(0),W(0),ue()):ee(!1))}),h(()=>e.side,(t,u)=>{o.instances[u]===K&&(o.instances[u]=void 0,o[u].space=!1,o[u].offset=0),o.instances[t]=K,o[t].size=g.value,o[t].space=j.value,o[t].offset=ae.value}),h(o.totalWidth,()=>{(o.isContainer.value===!0||document.qScrollPrevented!==!0)&&oe()}),h(()=>e.behavior+e.breakpoint,oe),h(o.isContainer,t=>{d.value===!0&&M(t!==!0),t===!0&&oe()}),h(o.scrollbarWidth,()=>{$(d.value===!0?0:void 0)}),h(ae,t=>{I("offset",t)}),h(j,t=>{v("onLayout",t),I("space",t)}),h(V,()=>{$()}),h(g,t=>{$(),re(e.miniToOverlay,t)}),h(()=>e.miniToOverlay,t=>{re(t,g.value)}),h(()=>k.lang.rtl,()=>{$()}),h(()=>e.mini,()=>{e.noMiniAnimation||e.modelValue===!0&&(Ie(),o.animate())}),h(F,t=>{v("miniState",t)});function $(t){t===void 0?ye(()=>{t=d.value===!0?0:g.value,$(R.value*t)}):(o.isContainer.value===!0&&V.value===!0&&(f.value===!0||Math.abs(t)===g.value)&&(t+=R.value*o.scrollbarWidth.value),ve.value=t)}function W(t){fe.value=t}function ne(t){const u=t===!0?"remove":o.isContainer.value!==!0?"add":"";u!==""&&document.body.classList[u]("q-body--drawer-toggle")}function Ie(){_!==null&&clearTimeout(_),r.proxy&&r.proxy.$el&&r.proxy.$el.classList.add("q-drawer--mini-animate"),te.value=!0,_=setTimeout(()=>{_=null,te.value=!1,r&&r.proxy&&r.proxy.$el&&r.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function Pe(t){if(d.value!==!1)return;const u=g.value,p=Y(t.distance.x,0,u);if(t.isFinal===!0){p>=Math.min(75,u)===!0?ee():(o.animate(),W(0),$(R.value*u)),N.value=!1;return}$((k.lang.rtl===!0?V.value!==!0:V.value)?Math.max(u-p,0):Math.min(0,p-u)),W(Y(p/u,0,1)),t.isFirst===!0&&(N.value=!0)}function he(t){if(d.value!==!0)return;const u=g.value,p=t.direction===e.side,X=(k.lang.rtl===!0?p!==!0:p)?Y(t.distance.x,0,u):0;if(t.isFinal===!0){Math.abs(X)<Math.min(75,u)===!0?(o.animate(),W(1),$(0)):U(),N.value=!1;return}$(R.value*X),W(Y(1-X/u,0,1)),t.isFirst===!0&&(N.value=!0)}function ue(){M(!1),ne(!0)}function I(t,u){o.update(e.side,t,u)}function Fe(t,u){t.value!==u&&(t.value=u)}function re(t,u){I("size",t===!0?e.miniWidth:u)}return o.instances[e.side]=K,re(e.miniToOverlay,g.value),I("space",j.value),I("offset",ae.value),e.showIfAbove===!0&&e.modelValue!==!0&&d.value===!0&&e["onUpdate:modelValue"]!==void 0&&v("update:modelValue",!0),Je(()=>{v("onLayout",j.value),v("miniState",F.value),A=e.showIfAbove===!0;const t=()=>{(d.value===!0?O:ce)(!1,!0)};if(o.totalWidth.value!==0){ye(t);return}w=h(o.totalWidth,()=>{w(),w=void 0,d.value===!1&&e.showIfAbove===!0&&f.value===!1?ee(!1):t()})}),_e(()=>{w!==void 0&&w(),_!==null&&(clearTimeout(_),_=null),d.value===!0&&ue(),o.instances[e.side]===K&&(o.instances[e.side]=void 0,I("size",0),I("offset",0),I("space",!1))}),()=>{const t=[];f.value===!0&&(e.noSwipeOpen===!1&&t.push(B(z("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),xe.value)),t.push(be("div",{ref:"backdrop",class:Qe.value,style:Le.value,"aria-hidden":"true",onClick:U},void 0,"backdrop",e.noSwipeBackdrop!==!0&&d.value===!0,()=>We.value)));const u=F.value===!0&&y.mini!==void 0,p=[z("div",{...C,key:""+u,class:[Me.value,C.class]},u===!0?y.mini():de(y.default))];return e.elevated===!0&&d.value===!0&&p.push(z("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(be("aside",{ref:"content",class:Ve.value,style:Ae.value},p,"contentclose",e.noSwipeClose!==!0&&f.value===!0,()=>ze.value)),z("div",{class:"q-drawer-container"},t)}}});const yt={name:"LogoutButton",setup(){const e=ie(),{locale:y,t:v}=Be({useScope:"global"});return{t:v,locale:y,auth:e}}};function bt(e,y,v,C,r,k){return m(),b(qe,{color:"negative",label:C.t("logout"),onClick:y[0]||(y[0]=i=>C.auth.logout()),class:"full-width"},null,8,["label"])}var kt=Se(yt,[["render",bt]]);const wt=Ye("network",{state:()=>({offline:!1})});const _t=Ze({name:"MainLayout",components:{logoutButton:kt,WorkingComponent:dt,LoginForm:rt},data(){const e=x(!1),y=ie(),{locale:v,t:C}=Be({useScope:"global"}),r=ot(),k=nt(),i=wt();return{locale:v,api:ct,t:C,authS:y,attendanceS:r,studentsS:k,networkS:i,leftDrawerOpen:e,toggleLeftDrawer(){e.value=!e.value}}},setup(){return{auth:ie()}}}),gt=tt("br",null,null,-1),pt={key:3};function St(e,y,v,C,r,k){const i=G("router-link"),M=G("logoutButton"),P=G("router-view"),H=G("WorkingComponent"),o=G("LoginForm");return m(),b(st,{dir:e.locale=="en-US"?"ltr":"rtl"},{default:a(()=>[e.authS.user!=null?(m(),b(mt,{key:0,elevated:"",dir:e.locale=="ar-EG"?"rtl":"ltr"},{default:a(()=>[l(vt,null,{default:a(()=>[l(qe,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:e.toggleLeftDrawer},null,8,["onClick"]),l(ft,null,{default:a(()=>[S("STDY Assistant App")]),_:1}),l(at)]),_:1})]),_:1},8,["dir"])):D("",!0),e.authS.user!=null?(m(),b(ht,{key:1,class:"notPrintable",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":y[0]||(y[0]=A=>e.leftDrawerOpen=A),"show-if-above":"",bordered:"",side:e.locale=="en-US"?"left":"right"},{default:a(()=>[l(ut,{class:"list"},{default:a(()=>{var A;return[gt,B((m(),b(q,{active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-home"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/",style:{"text-decoration":"none"},"active-class":"router-link"},{default:a(()=>[S(Q(e.t("Home")),1)]),_:1})]),_:1})]),_:1})),[[L]]),e.studentsS.student!=null&&e.studentsS.student.id!=null?B((m(),b(q,{key:0,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-user-pen"})]),_:1}),l(c,null,{default:a(()=>{var _,w;return[l(i,{class:"router-link",to:"/students/"+((w=(_=e.studentsS.student)==null?void 0:_.id)!=null?w:-1)+"/edit",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("Edit Student")),1)]),_:1},8,["to"])]}),_:1})]),_:1})),[[L]]):D("",!0),e.auth.isSuperAssistant?B((m(),b(q,{key:1,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-brands fa-youtube"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/rewatch-requests",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("Requests")),1)]),_:1})]),_:1})]),_:1})),[[L]]):D("",!0),e.auth.isSuperAssistant?B((m(),b(q,{key:2,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-id-card-clip"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/reports/attendance",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("Attendance Reports")),1)]),_:1})]),_:1})]),_:1})),[[L]]):D("",!0),B((m(),b(q,{active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-id-card-clip"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/exams/new_offline_exam",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("NewOfflineExam")),1)]),_:1})]),_:1})]),_:1})),[[L]]),e.auth.isSuperAssistant?B((m(),b(q,{key:3,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-money-bill-wave"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/reports/fees",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("Fees Reports")),1)]),_:1})]),_:1})]),_:1})),[[L]]):D("",!0),e.auth.isSuperAssistant?B((m(),b(q,{key:4,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-users"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/reports/students",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("Students Reports")),1)]),_:1})]),_:1})]),_:1})),[[L]]):D("",!0),e.auth.isSuperAssistant?B((m(),b(q,{key:5,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-list"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/reports/attendance2",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("attendance reports2")),1)]),_:1})]),_:1})]),_:1})),[[L]]):D("",!0),e.auth.isSuperAssistant?B((m(),b(q,{key:6,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-circle-question"})]),_:1}),l(c,null,{default:a(()=>{var _;return[l(i,{class:"router-link",to:`courses/${(_=e.attendanceS.selectedCourse)==null?void 0:_.id}/exam-questions`,style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("Questions Bank")),1)]),_:1},8,["to"])]}),_:1})]),_:1})),[[L]]):D("",!0),e.auth.isSuperAssistant?B((m(),b(q,{key:7,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-sack-dollar"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/reports/income-report",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("Daily Income Report")),1)]),_:1})]),_:1})]),_:1})),[[L]]):D("",!0),((A=e.attendanceS.selectedCourse)==null?void 0:A.offline_homework_mode)==!0&&e.auth.isSuperAssistant?B((m(),b(q,{key:8,active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-rectangle-list"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/bulk_insert_homework_answers",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("bulk insert homework answers")),1)]),_:1})]),_:1})]),_:1})),[[L]]):D("",!0),B((m(),b(q,{active:"",clickable:""},{default:a(()=>[l(c,{avatar:""},{default:a(()=>[l(T,{name:"fa-solid fa-rectangle-list"})]),_:1}),l(c,null,{default:a(()=>[l(i,{class:"router-link",to:"/comments",style:{"text-decoration":"none"}},{default:a(()=>[S(Q(e.t("Instructor Comments")),1)]),_:1})]),_:1})]),_:1})),[[L]]),l(q,null,{default:a(()=>[l(M)]),_:1})]}),_:1})]),_:1},8,["modelValue","side"])):D("",!0),e.authS.user!=null?(m(),b(it,{key:2,dir:e.locale=="ar-EG"?"rtl":"ltr"},{default:a(()=>[l(P)]),_:1},8,["dir"])):(m(),et("div",pt,[e.authS.working?(m(),b(H,{key:0})):(m(),b(o,{key:1}))]))]),_:1},8,["dir"])}var Pt=Se(_t,[["render",St]]);export{Pt as default};
