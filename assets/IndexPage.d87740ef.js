import{k as re,i as ne,m as j,c as oe,h as ie,l as me,g as pe,q as ce,a0 as fe,d as P,_ as B,G as a,P as S,H as f,Q as h,M as y,j as t,K as l,aZ as K,bj as ee,bk as Se,aV as _,R as i,F as H,ae as W,O as m,J as U,L as b,bg as q,ab as N,a_ as ae,N as z,ad as x}from"./index.e88ad099.js";import{l as be}from"./login-form.021ee75d.js";import{w as ye}from"./working-component.e4cdcfd2.js";import{s as G,a as O,c as Y,m as se,Q as V,d as p,i as J,e as ve}from"./auth.27c9e4d6.js";import{Q as T}from"./QSelect.9edcaa34.js";import{Q as A}from"./QSpace.dac1a6e3.js";import{Q as g}from"./QItemLabel.ef0548aa.js";import{Q as he}from"./QList.2701078e.js";import{Q as le,a as te}from"./QTable.f567dba6.js";import{e as ke,l as ge}from"./exam-answers.e5f7b2d2.js";import{u as M}from"./vue-i18n.c257f8c9.js";import{S as $e,C as Ce,E as we,t as Ve,a as qe,b as Fe}from"./student-course-tab-view.e518dcf1.js";import{f as ue}from"./fees-printable.b6257933.js";import{Q as de}from"./QForm.847ae6d4.js";import{Q as Z}from"./QTr.936fc6fd.js";import{Q as X}from"./QTd.ab105d49.js";import"./QResizeObserver.3cb90529.js";import"./QCircularProgress.85675cf4.js";import"./axios.21178db7.js";import"./index.31a62591.js";import"./_commonjsHelpers.4e997714.js";import"./QField.62c1a422.js";import"./selection.dc814625.js";import"./exam-question.3d01010e.js";import"./QTabPanels.08ca7d8f.js";import"./touch.9135741d.js";import"./use-render-cache.3aae9b27.js";import"./QImg.4d61fa2a.js";var Ae=re({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:s}){const{proxy:{$q:c}}=pe(),k=ne(ce,j);if(k===j)return console.error("QPage needs to be a deep child of QLayout"),j;if(ne(fe,j)===j)return console.error("QPage needs to be child of QPageContainer"),j;const o=oe(()=>{const u=(k.header.space===!0?k.header.size:0)+(k.footer.space===!0?k.footer.size:0);if(typeof e.styleFn=="function"){const d=k.isContainer.value===!0?k.containerHeight.value:c.screen.height;return e.styleFn(u,d)}return{minHeight:k.isContainer.value===!0?k.containerHeight.value-u+"px":c.screen.height===0?u!==0?`calc(100vh - ${u}px)`:"100vh":c.screen.height-u+"px"}}),n=oe(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>ie("main",{class:n.value,style:o.value},me(s.default))}});const Ue=P({name:"remove-deviceid",methods:{clickedRemove(){this.confirmRemDevID=!1,this.studentsS.removeDeviceIdAction(this.studentsS.student)}},data(){return{studentsS:G(),confirmRemDevID:!1}},setup(){return{auth:O()}}}),Ne=i("p",null,"Are you sure you want to delete student's device ID ?",-1);function Ee(e,s,c,k,$,o){var n,u,d,C,E,L;return a(),S("div",null,[((d=(u=(n=e.studentsS.student)==null?void 0:n.user)==null?void 0:u.profile)==null?void 0:d.deviceId)!=null&&((L=(E=(C=e.studentsS.student)==null?void 0:C.user)==null?void 0:E.profile)==null?void 0:L.deviceId.length)>0&&e.auth.isSuperAssistant?(a(),f(h,{key:0,class:"q-pa-md full-width",label:"remove device Id",color:"negative",onClick:s[0]||(s[0]=v=>e.confirmRemDevID=!0)})):y("",!0),t(_,{modelValue:e.confirmRemDevID,"onUpdate:modelValue":s[3]||(s[3]=v=>e.confirmRemDevID=v)},{default:l(()=>[t(K,null,{default:l(()=>[t(ee,null,{default:l(()=>[Ne]),_:1}),t(Se,{align:"right"},{default:l(()=>[t(h,{color:"negative",label:"Remove",onClick:s[1]||(s[1]=v=>e.clickedRemove())}),t(h,{color:"primary",label:"cancel",onClick:s[2]||(s[2]=v=>e.confirmRemDevID=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}var De=B(Ue,[["render",Ee]]);const Qe=P({setup(){const e=ke(),s=G(),c=Y();return{examAnswersS:e,studentsS:s,attendanceS:c}},async mounted(){console.log("student course exam answers component is loaded"),this.attendanceS.selectedCourse!=null&&this.studentsS.student!=null&&(await this.examAnswersS.query(this.studentsS.student,this.attendanceS.selectedCourse),this.$forceUpdate())}}),Pe={key:0},Be={key:1},Le=i("br",null,null,-1),Ie=i("b",null,"Exam answers",-1),Te=i("br",null,null,-1),Re={class:"col"},Ke={class:"col"},Ge={class:"col"},Oe={class:"col"},Me={class:"col"},He={class:"col"},Ye={class:"col"},je=i("br",null,null,-1),ze=i("b",null,"missing exam answers",-1),We=i("br",null,null,-1),Je={class:"col"};function Ze(e,s,c,k,$,o){return a(),S("div",null,[e.examAnswersS.working?(a(),S("div",Pe,"working...")):(a(),S("div",Be,[t(K,{flat:"",bordered:"",class:"q-mx-md q-pa-md"},{default:l(()=>[Le,Ie,Te,(a(!0),S(H,null,W(e.examAnswersS.examAnswers,(n,u)=>{var d,C,E;return a(),S("div",{key:u,class:"row"},[i("div",Re,m((C=(d=n.exam)==null?void 0:d.lesson)==null?void 0:C.title),1),i("div",Ke,m((E=n.exam)==null?void 0:E.name),1),i("div",Ge,"score:"+m(n.score),1),i("div",Oe,"percent:"+m(n.percent)+"%",1),i("div",Me,m(n.pass_percent)+"%",1),i("div",He,m(n.redo_idx),1),i("div",Ye,m(n.status),1)])}),128)),je,ze,We,(a(!0),S(H,null,W(e.examAnswersS.lessonsWithMissingExamAnswers,(n,u)=>(a(),S("div",{key:u,class:"row"},[i("div",Je,m(n.title),1)]))),128))]),_:1})]))])}var Xe=B(Qe,[["render",Ze]]);const _e=P({name:"subscribeForm",data(){const e=Y(),s=G(),c=se(),{locale:k,t:$}=M({useScope:"global"});return{homeworkAnswersS:c,locale:k,t:$,attendanceS:e,studentsS:s,options:["","\u062A\u062E\u0641\u064A\u0636","\u0628\u0627\u0643\u062F\u062C","\u062A\u064A\u0645","\u0645\u062C\u0627\u0646\u064A","\u0627\u0648\u0646\u0644\u0627\u064A\u0646","\u0641\u0648\u062F\u0627\u0641\u0648\u0646 \u0643\u0627\u0634","\u0638\u0631\u0648\u0641 \u062E\u0627\u0635\u0629"]}},mounted(){var e,s,c;this.studentsS.fees=(s=(e=this.attendanceS.selectedCourse)==null?void 0:e.center_subscription_cost)!=null?s:0,this.studentsS.group=(c=this.attendanceS.selectedGroup)!=null?c:"",this.studentsS.notes="",this.studentsS.notesDescription="",this.studentsS.barcode=this.studentsS.barcode,this.studentsS.selectLessons()}}),xe={class:"row full-width q-my-md"},et=i("br",null,null,-1),tt={key:2},st={class:"row full-width q-my-md"};function lt(e,s,c,k,$,o){const n=U("q-spac");return a(),f(_,null,{default:l(()=>[t(K,{style:{width:"500px"},dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>{var u,d,C,E,L;return[t(V,{class:"bg-primary"},{default:l(()=>[t(p,null,{default:l(()=>[t(g,{class:"text-center text-h6 text-white"},{default:l(()=>[b(m(e.t("Subscribe Student to course")),1)]),_:1})]),_:1})]),_:1}),t(q),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Name"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var v,w,I,R;return[b(m((R=(I=(w=(v=e.studentsS.student)==null?void 0:v.user)==null?void 0:w.profile)==null?void 0:I.name)!=null?R:""),1)]}),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Phone Number"))+" : ",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var v,w,I,R;return[b(m((R=(I=(w=(v=e.studentsS.student)==null?void 0:v.user)==null?void 0:w.profile)==null?void 0:I.phoneNumber)!=null?R:""),1)]}),_:1})]),_:1})]),_:1}),((u=e.studentsS.student)==null?void 0:u.barcode)==null?(a(),f(q,{key:0,inset:""})):y("",!0),((d=e.studentsS.student)==null?void 0:d.barcode)==null?(a(),f(V,{key:1},{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Barcode"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.barcode,"onUpdate:modelValue":s[0]||(s[0]=v=>e.studentsS.barcode=v),type:"number",outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):y("",!0),i("div",xe,[t(n),((C=e.studentsS.student)==null?void 0:C.barcode)==null&&e.studentsS.barcode!=null&&e.studentsS.barcode!=""?(a(),f(h,{key:0,class:"q-mx-md",style:{width:"200px"},label:"save barcode",color:"primary",onClick:s[1]||(s[1]=v=>e.studentsS.confirmUpdateBarcode())})):y("",!0),t(n)]),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Course"))+" : ",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var v,w;return[b(m((w=(v=e.attendanceS.selectedCourse)==null?void 0:v.name)!=null?w:""),1)]}),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Group"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var v,w;return[t(T,{modelValue:e.studentsS.group,"onUpdate:modelValue":s[2]||(s[2]=I=>e.studentsS.group=I),outlined:"",options:(w=(v=e.attendanceS.selectedCourse)==null?void 0:v.groups)!=null?w:[],dense:"",class:"full-width"},null,8,["modelValue","options"])]}),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Fees"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.fees,"onUpdate:modelValue":s[3]||(s[3]=v=>e.studentsS.fees=v),modelModifiers:{number:!0},type:"number",outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Notes"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(T,{outlined:"",dense:"",modelValue:e.studentsS.notes,"onUpdate:modelValue":[s[4]||(s[4]=v=>e.studentsS.notes=v),s[5]||(s[5]=v=>e.studentsS.notesDescription=e.studentsS.notes)],options:e.options},null,8,["modelValue","options"]),et,t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.notesDescription,"onUpdate:modelValue":s[6]||(s[6]=v=>e.studentsS.notesDescription=v),placeholder:"Note description",outlined:"",dense:"",class:"full-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{inset:""}),((E=e.attendanceS.selectedCourse)==null?void 0:E.offline_homework_mode)==!0?(a(),S("div",tt,[t(T,{class:"q-mx-md",style:{width:"450px"},multiple:"",options:(L=e.attendanceS.selectedCourse)==null?void 0:L.lessonOptions,modelValue:e.homeworkAnswersS.lessons,"onUpdate:modelValue":s[7]||(s[7]=v=>e.homeworkAnswersS.lessons=v),label:"delivered homework lessons",clearable:""},null,8,["options","modelValue"]),t(q,{inset:""})])):y("",!0),i("div",st,[e.studentsS.student!=null&&e.attendanceS.selectedCourse!=null&&e.studentsS.group!=null&&e.studentsS.group.length>0&&e.studentsS.fees>0?(a(),f(h,{key:0,class:"q-mx-md",style:{width:"200px"},label:e.t("subscribe"),onClick:s[8]||(s[8]=v=>e.studentsS.subscribe()),color:"primary"},null,8,["label"])):(a(),f(h,{key:1,disable:"",color:"primary",class:"q-mx-md",style:{width:"200px"},label:e.t("subscribe")},null,8,["label"])),t(A),t(h,{class:"q-mx-md",style:{width:"200px"},onClick:s[9]||(s[9]=v=>e.studentsS.showSubscribeForm=!1),label:e.t("cancel"),color:"negative"},null,8,["label"])])]}),_:1},8,["dir"])]),_:1})}var nt=B(_e,[["render",lt]]);const ot=P({name:"quickCreateFeesTransaction",components:{feesPrintable:ue},methods:{amountKeyUp(e){e.key==="Enter"&&this.feesS.confirmCreateTransaction()}},data(){const{locale:e,t:s}=M({useScope:"global"}),c=O(),k=Y(),$=G(),o=J();return{locale:e,t:s,authS:c,attendanceS:k,feesS:o,studentsS:$}}}),at={key:1},ut={class:"row"};function dt(e,s,c,k,$,o){const n=U("feesPrintable");return e.feesS.transaction!=null&&e.feesS.paid?(a(),f(n,{key:0,modelValue:e.feesS.paid,"onUpdate:modelValue":s[0]||(s[0]=u=>e.feesS.paid=u)},null,8,["modelValue"])):(a(),S("div",at,[t(K,{flat:"",dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>[i("div",ut,[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"100px"}},{default:l(()=>[b(m(e.t("Amount"))+":",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.feesS.amount,"onUpdate:modelValue":s[1]||(s[1]=u=>e.feesS.amount=u),modelModifiers:{number:!0},onKeyup:e.amountKeyUp,type:"number",outlined:"",dense:""},null,8,["modelValue","onKeyup"])]),_:1})]),_:1}),t(p,null,{default:l(()=>[e.feesS.paid==!1?(a(),f(h,{key:0,onClick:s[2]||(s[2]=u=>e.feesS.confirmCreateTransaction()),label:e.t("save"),color:"primary"},null,8,["label"])):y("",!0)]),_:1}),t(A)])]),_:1},8,["dir"])]))}var rt=B(ot,[["render",dt]]);const it=P({data(){const{locale:e,t:s}=M({useScope:"global"}),c=G();return{locale:e,t:s,studentsS:c}},methods:{handleEnter(e){e.key==="Enter"&&this.studentsS.confirmUpdateBarcode()}},async mounted(){const e=this.$route.params.id;typeof e=="string"&&this.studentsS.getStudentById(parseInt(e))}}),mt={class:"row full-width q-my-md"};function pt(e,s,c,k,$,o){return a(),f(_,{class:"q-ma-md",persistent:""},{default:l(()=>[t(K,{style:{width:"500px"},dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>[t(V,{class:"bg-primary"},{default:l(()=>[t(p,null,{default:l(()=>[t(g,{class:"text-center text-h6 text-white"},{default:l(()=>[b(m(e.t("Barcode")),1)]),_:1})]),_:1})]),_:1}),t(q),e.studentsS.student!=null?(a(),f(de,{key:0,class:"q-ma-md"},{default:l(()=>[t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Barcode"))+":",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.barcode,"onUpdate:modelValue":s[0]||(s[0]=n=>e.studentsS.barcode=n),onKeydown:e.handleEnter,type:"number",outlined:"",dense:"",class:"full-width"},null,8,["modelValue","onKeydown"])]),_:1})]),_:1})]),_:1}),i("div",mt,[t(h,{class:"q-mx-md",style:{width:"200px"},onClick:s[1]||(s[1]=n=>e.$emit("cancel")),label:e.t("cancel"),color:"negative"},null,8,["label"]),t(A),t(h,{class:"q-mx-md",style:{width:"200px"},label:e.t("save"),onClick:s[2]||(s[2]=n=>e.studentsS.confirmUpdateBarcode()),color:"primary"},null,8,["label"])])]),_:1})):y("",!0)]),_:1},8,["dir"])]),_:1})}var ct=B(it,[["render",pt]]);const ft=P({name:"createStudentForm",methods:{handleEnter(e){e.key==="Enter"&&this.studentsS.confirmCreateStudentAndSubscribeToCourse()}},data(){const{locale:e,t:s}=M({useScope:"global"}),c=O(),k=Y(),$=G(),o=J();return{homeworkAnswersS:se(),locale:e,t:s,authS:c,attendanceS:k,feesS:o,studentsS:$,options:["","\u062A\u062E\u0641\u064A\u0636","\u0628\u0627\u0643\u062F\u062C","\u062A\u064A\u0645","\u0645\u062C\u0627\u0646\u064A","\u0627\u0648\u0646\u0644\u0627\u064A\u0646","\u0641\u0648\u062F\u0627\u0641\u0648\u0646 \u0643\u0627\u0634","\u0638\u0631\u0648\u0641 \u062E\u0627\u0635\u0629"]}},mounted(){this.studentsS.country="Egypt",console.log("create student form"),this.studentsS.initCreateStudentForm()}}),St={class:"col-5"},bt={class:"col-7"},yt=i("br",null,null,-1),vt={key:0},ht={class:"row full-width q-my-md"};function kt(e,s,c,k,$,o){return a(),f(_,{ref:"createStudentForm"},{default:l(()=>[t(K,{style:{width:"500px"},dir:e.locale=="en-US"?"ltr":"rtl"},{default:l(()=>[t(V,{class:"bg-primary"},{default:l(()=>[t(p,null,{default:l(()=>[t(g,{class:"text-center text-h6 text-white"},{default:l(()=>[b(m(e.t("New Student")),1)]),_:1})]),_:1})]),_:1}),t(q),t(de,null,{default:l(()=>{var n,u;return[t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Phone Number"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.phoneNumber,"onUpdate:modelValue":s[0]||(s[0]=d=>e.studentsS.phoneNumber=d),placeholder:"phoneNumber"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("country"))+": ",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"row"},{default:l(()=>[i("div",St,[t(ae,{modelValue:e.studentsS.country,"onUpdate:modelValue":s[1]||(s[1]=d=>e.studentsS.country=d),label:e.t("Egypt"),val:"Egypt"},null,8,["modelValue","label"])]),i("div",bt,[t(ae,{modelValue:e.studentsS.country,"onUpdate:modelValue":s[2]||(s[2]=d=>e.studentsS.country=d),label:e.t("Rest Of The World"),val:"Rest Of The World"},null,8,["modelValue","label"])])]),_:1})]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Parent Phone Number"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{outlined:"",dense:"",class:"full-width",modelValue:e.studentsS.parentPhoneNumber,"onUpdate:modelValue":s[3]||(s[3]=d=>e.studentsS.parentPhoneNumber=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m("password")+" :")]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.password,"onUpdate:modelValue":s[4]||(s[4]=d=>e.studentsS.password=d),outlined:"",dense:"",class:"full-width",onKeyup:e.handleEnter},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Name"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.name,"onUpdate:modelValue":s[5]||(s[5]=d=>e.studentsS.name=d),outlined:"",dense:"",class:"full-width",onKeyup:e.handleEnter},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Barcode"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.barcode,"onUpdate:modelValue":s[6]||(s[6]=d=>e.studentsS.barcode=d),type:"number",outlined:"",dense:"",class:"full-width",onKeyup:e.handleEnter},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Group"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>{var d,C;return[t(T,{modelValue:e.studentsS.group,"onUpdate:modelValue":s[7]||(s[7]=E=>e.studentsS.group=E),outlined:"",options:(C=(d=e.attendanceS.selectedCourse)==null?void 0:d.groups)!=null?C:[],dense:"",class:"full-width"},null,8,["modelValue","options"])]}),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Fees"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.fees,"onUpdate:modelValue":s[8]||(s[8]=d=>e.studentsS.fees=d),modelModifiers:{number:!0},type:"number",outlined:"",onKeyup:e.handleEnter,dense:"",class:"full-width"},null,8,["modelValue","onKeyup"])]),_:1})]),_:1})]),_:1}),t(q,{inset:""}),t(V,null,{default:l(()=>[t(p,{avatar:"",class:"text-primary text-bold",style:{width:"150px"}},{default:l(()=>[b(m(e.t("Notes"))+" :",1)]),_:1}),t(p,null,{default:l(()=>[t(T,{outlined:"",dense:"",modelValue:e.studentsS.notes,"onUpdate:modelValue":s[9]||(s[9]=d=>e.studentsS.notes=d),options:e.options},null,8,["modelValue","options"]),yt,t(g,{class:"text-black text-bold"},{default:l(()=>[t(N,{modelValue:e.studentsS.notesDescription,"onUpdate:modelValue":s[10]||(s[10]=d=>e.studentsS.notesDescription=d),outlined:"",dense:"",class:"full-width",placeholder:"Note description"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{inset:""}),((n=e.attendanceS.selectedCourse)==null?void 0:n.offline_homework_mode)==!0?(a(),S("div",vt,[t(T,{class:"q-mx-md",style:{width:"450px"},multiple:"",options:(u=e.attendanceS.selectedCourse)==null?void 0:u.lessonOptions,modelValue:e.homeworkAnswersS.lessons,"onUpdate:modelValue":s[11]||(s[11]=d=>e.homeworkAnswersS.lessons=d),label:"delivered homework lessons",clearable:""},null,8,["options","modelValue"]),t(q,{inset:""})])):y("",!0),i("div",ht,[t(h,{class:"q-mx-md",style:{width:"200px"},onClick:s[12]||(s[12]=d=>e.studentsS.showCreateStudentForm=!1),label:e.t("cancel"),color:"negative"},null,8,["label"]),t(A),e.studentsS.phoneNumber!=null&&e.studentsS.phoneNumber.length>0&&e.attendanceS.selectedCourse!=null&&e.studentsS.name!=null&&e.studentsS.name.length>0&&e.studentsS.group!=null&&e.studentsS.group.length>0&&e.studentsS.fees>=0?(a(),f(h,{key:0,class:"q-mx-md",style:{width:"200px"},label:e.t("create"),onClick:s[13]||(s[13]=d=>e.studentsS.confirmCreateStudentAndSubscribeToCourse()),color:"primary"},null,8,["label"])):(a(),f(h,{key:1,disable:"",color:"primary",class:"q-mx-md",style:{width:"200px"},label:"create"}))])]}),_:1})]),_:1},8,["dir"])]),_:1},512)}var gt=B(ft,[["render",kt]]);const $t=P({name:"studentSelectionForm",components:{removeDeviceidVue:De,studentCourseExamAnswers:Xe,"student-course-tab-view":$e,editStudentBarcode:ct,quickCreateFeesTransaction:rt,createStudentForm:gt,subscribeForm:nt,createFeesTransaction:Ce,EditSubscriptionDialog:we},computed:{student(){return Ve(this.studentsS.student)},course(){return qe(this.attendanceS.selectedCourse)},subscription(){return Fe(this.studentsS.subscription)},showSubscribeFormComputed(){return this.studentsS.showSubscribeForm&&this.attendanceS.selectedCourse!=null&&this.studentsS.student!=null}},watch:{student(e){e==null&&this.studentsS.barcode.length>0&&this.studentsS.clear()}},data(){const{locale:e,t:s}=M({useScope:"global"}),c=O(),k=Y(),$=G(),o=J();return{locale:e,t:s,authS:c,attendanceS:k,feesS:o,studentsS:$,columns:[{label:s("Course"),name:"course",align:"left",sortable:!0,field:n=>{var u;return(u=n==null?void 0:n.course)==null?void 0:u.name}},{label:s("Group"),name:"group",align:"left",sortable:!0,field:n=>n==null?void 0:n.group},{label:s("Status"),name:"status",align:"left",sortable:!0,field:n=>n!=null&&n.active?s("Active"):s("Not Active")},{label:s("Fees"),name:"Fees",align:"left",sortable:!0,field:n=>n==null?void 0:n.fees},{label:s("Remaining Fees"),name:"remaining fees",align:"left",sortable:!0,field:n=>n==null?void 0:n.remaining_fees}]}}}),Ct=i("br",null,null,-1),wt={key:0},Vt={class:"row full-width q-mb-md"},qt={class:"col-10"},Ft={class:"text-weight-medium q-mx-sm"},At={key:0,class:"cursor-pointer q-mx-sm"},Ut={key:1,class:"cursor-pointer q-mx-sm"},Nt={key:2,class:"cursor-pointer q-mx-sm"},Et={class:"col-2"},Dt={class:"row full-width"},Qt=i("br",null,null,-1),Pt={class:"row"},Bt=i("br",null,null,-1),Lt={class:"full-width q-mt-md"},It=i("br",null,null,-1),Tt=i("br",null,null,-1),Rt={class:"row full-width"},Kt=i("br",null,null,-1),Gt={class:"row full-width items-center"},Ot={class:"row full-width"},Mt={key:0},Ht=i("br",null,null,-1),Yt={key:0,class:"row full-width"},jt={key:1},zt={key:2},Wt={key:1},Jt={key:0},Zt={key:1,class:"row full-width"},Xt={class:"col-12 q-my-md q-px-md"},_t=i("br",null,null,-1),xt={class:"col-12 q-my-md q-px-md"},es={key:0,style:{color:"red"},class:"q-ml-lg q-mr-lg"},ts={key:2},ss=i("br",null,null,-1);function ls(e,s,c,k,$,o){var R;const n=U("quickCreateFeesTransaction"),u=U("EditSubscriptionDialog"),d=U("removeDeviceidVue"),C=U("createFeesTransaction"),E=U("subscribeForm"),L=U("createStudentForm"),v=U("editStudentBarcode"),w=U("student-course-tab-view"),I=U("studentCourseExamAnswers");return a(),S("div",null,[Ct,e.studentsS.student!=null?(a(),S("div",wt,[t(he,{bordered:"",class:"rounded-borders q-mx-md"},{default:l(()=>[t(V,null,{default:l(()=>[t(p,{top:""},{default:l(()=>[i("div",Vt,[i("div",qt,[t(g,{lines:"1",class:"q-mt-xs text-body2 text-weight-bold text-primary text-uppercase"},{default:l(()=>{var r,F,D,Q;return[i("span",Ft,m((Q=(D=(F=(r=e.studentsS.student)==null?void 0:r.user)==null?void 0:F.profile)==null?void 0:D.name)!=null?Q:""),1)]}),_:1}),t(g,{lines:"1",class:"q-mx-sm"},{default:l(()=>{var r,F,D,Q;return[b(m(e.t("Student Phone"))+" : "+m((Q=(D=(F=(r=e.studentsS.student)==null?void 0:r.user)==null?void 0:F.profile)==null?void 0:D.phoneNumber)!=null?Q:""),1)]}),_:1}),t(g,{lines:"1",class:"q-mx-sm"},{default:l(()=>{var r,F,D,Q;return[b(m(e.t("Parent Phone"))+" : "+m((Q=(D=(F=(r=e.studentsS.student)==null?void 0:r.user)==null?void 0:F.profile)==null?void 0:D.parentPhoneNumber)!=null?Q:""),1)]}),_:1}),t(g,{caption:"",lines:"2"},{default:l(()=>{var r,F,D,Q;return[e.studentsS.subscription!=null?(a(),S("span",At,m((F=(r=e.studentsS.subscription)==null?void 0:r.notes)!=null?F:""),1)):y("",!0),e.studentsS.subscription!=null?(a(),S("span",Ut," - ")):y("",!0),e.studentsS.subscription!=null?(a(),S("span",Nt,m((Q=(D=e.studentsS.subscription)==null?void 0:D.notesDescription)!=null?Q:""),1)):y("",!0)]}),_:1})]),i("div",Et,[t(h,{class:"q-mb-sm",color:"negative",size:"lg",flat:"",icon:"fa-solid fa-square-xmark",onClick:s[0]||(s[0]=r=>e.studentsS.clear())})]),i("div",Dt,[Qt,t(K,{flat:"",bordered:"",class:"q-mx-md q-pa-md full-width"},{default:l(()=>[i("div",Pt,[t(A),e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),f(h,{key:0,stack:"",stretch:"",flat:"",color:"primary",icon:"fa-solid fa-user-pen",onClick:s[1]||(s[1]=r=>e.studentsS.showEditSubscriptionDialog=!0)},{default:l(()=>[b("Edit")]),_:1})):y("",!0),t(A),t(q,{vertical:"",inset:""}),t(A),t(h,{stack:"",stretch:"",flat:"",color:"primary",icon:"fa-solid fa-users"},{default:l(()=>{var r,F;return[b(m((F=(r=e.studentsS.subscription)==null?void 0:r.group)!=null?F:""),1)]}),_:1}),t(A),t(q,{vertical:"",inset:""}),t(A),t(h,{stack:"",flat:"",color:"primary",icon:"fa-solid fa-barcode",onClick:s[2]||(s[2]=r=>e.studentsS.showEditBarcodeForm=!e.studentsS.showEditBarcodeForm)},{default:l(()=>{var r;return[b(m((r=e.studentsS.student.barcode)!=null?r:"no bar code"),1)]}),_:1}),t(A),t(q,{vertical:"",inset:""}),t(A),t(h,{stack:"",flat:"",color:"primary",icon:"fa-solid fa-money-bill-wave"},{default:l(()=>{var r,F;return[b(m((F=(r=e.studentsS.subscription)==null?void 0:r.fees)!=null?F:""),1)]}),_:1}),t(A),t(q,{vertical:"",inset:""}),t(A),t(h,{stack:"",flat:"",color:"negative",icon:"fa-solid fa-money-bill-wave"},{default:l(()=>{var r,F;return[b(m((F=(r=e.studentsS.subscription)==null?void 0:r.remaining_fees)!=null?F:""),1)]}),_:1}),t(A)])]),_:1})])]),Bt,t(g,null,{default:l(()=>[i("div",Lt,[e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),f(n,{key:0})):y("",!0)]),It,Tt,i("div",Rt,[!e.studentsS.showCreateStudentForm&&e.studentsS.isInCourse&&e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),f(h,{key:0,stack:"",color:"primary",class:"q-ma-sm col-4",label:e.t("Add Attendance"),icon:"fa-solid fa-user-check",onClick:s[3]||(s[3]=r=>e.attendanceS.confirmCreateAttendance(!0))},null,8,["label"])):y("",!0),t(A),!e.studentsS.showCreateStudentForm&&e.studentsS.isInCourse&&e.studentsS.subscription!=null&&e.studentsS.subscription.active&&e.attendanceS.attendanceRecord!=null?(a(),f(h,{key:1,stack:"",color:"negative",class:"q-ma-sm col-4",label:e.t("Remove Attendance"),icon:"fa-solid fa-user-minus",onClick:s[4]||(s[4]=r=>e.attendanceS.removeAttendance(e.attendanceS.attendanceRecord))},null,8,["label"])):y("",!0)]),Kt,i("div",Gt,[e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),f(h,{key:0,stack:"",color:"primary",class:"q-ma-sm col-4",label:e.t("Add Payment"),icon:"fa-solid fa-money-bill-wave",onClick:s[5]||(s[5]=r=>e.studentsS.showFeesForm=!0)},null,8,["label"])):y("",!0),t(A),e.studentsS.student!=null&&!e.studentsS.isInCourse?(a(),f(h,{key:1,stack:"",color:"positive",class:"q-ma-sm col-4",label:e.t("subscribe"),icon:"fa-solid fa-user",onClick:s[6]||(s[6]=r=>e.studentsS.showSubscribeForm=!0)},null,8,["label"])):y("",!0),e.studentsS.student!=null&&e.studentsS.subscription!=null&&e.studentsS.subscription.active?(a(),f(h,{key:2,stack:"",color:"negative",class:"q-ma-sm col-4",label:e.t("deactivate"),icon:"fa-solid fa-user-xmark",onClick:s[7]||(s[7]=r=>e.studentsS.deactivateConfirm())},null,8,["label"])):y("",!0),e.studentsS.student!=null&&e.studentsS.subscription!=null&&!e.studentsS.subscription.active?(a(),f(h,{key:3,stack:"",color:"primary",class:"q-ma-sm full-width",label:e.t("activate"),icon:"fa-solid fa-user-check",onClick:s[8]||(s[8]=r=>e.studentsS.activateConfirm())},null,8,["label"])):y("",!0)]),i("div",Ot,[e.studentsS.subscription!=null?(a(),S("div",Mt,[t(u,{modelValue:e.studentsS.showEditSubscriptionDialog,"onUpdate:modelValue":s[9]||(s[9]=r=>e.studentsS.showEditSubscriptionDialog=r)},null,8,["modelValue"])])):y("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),Ht,e.studentsS.student!=null?(a(),f(K,{key:0,flat:"",bordered:"",class:"q-mx-md"},{default:l(()=>[t(ee,null,{default:l(()=>[e.studentsS.student!=null&&e.attendanceS.selectedCourse!=null?(a(),S("div",Yt,[t(N,{outlined:"",type:"password",modelValue:e.studentsS.password,"onUpdate:modelValue":s[10]||(s[10]=r=>e.studentsS.password=r),placeholder:"password",class:"col-3"},null,8,["modelValue"]),t(A),t(N,{outlined:"",type:"password",modelValue:e.studentsS.repeatPassword,"onUpdate:modelValue":s[11]||(s[11]=r=>e.studentsS.repeatPassword=r),placeholder:"repeat password",class:"col-3"},null,8,["modelValue"]),t(A),t(h,{class:"q-pa-md",label:"change password",color:"primary",onClick:s[12]||(s[12]=r=>e.studentsS.changePassword())})])):y("",!0)]),_:1}),t(ee,null,{default:l(()=>[e.studentsS.student!=null?(a(),f(d,{key:0})):y("",!0)]),_:1})]),_:1})):y("",!0),e.studentsS.showFeesForm&&e.attendanceS.selectedCourse!=null&&e.studentsS.student!=null&&e.studentsS.subscription!=null?(a(),S("div",jt,[t(C,{modelValue:e.studentsS.showFeesForm,"onUpdate:modelValue":s[13]||(s[13]=r=>e.studentsS.showFeesForm=r)},null,8,["modelValue"])])):y("",!0),e.studentsS.showSubscribeForm?(a(),S("div",zt,[t(E,{modelValue:e.studentsS.showSubscribeForm,"onUpdate:modelValue":s[14]||(s[14]=r=>e.studentsS.showSubscribeForm=r)},null,8,["modelValue"])])):y("",!0),t(le,{bordered:"",flat:"",rows:e.studentsS.selected_student_courses,columns:e.columns,class:"q-ma-md"},null,8,["rows","columns"])])):(a(),S("div",Wt,[e.studentsS.showCreateStudentForm?(a(),S("div",Jt,[t(L,{modelValue:e.studentsS.showCreateStudentForm,"onUpdate:modelValue":s[15]||(s[15]=r=>e.studentsS.showCreateStudentForm=r),accesskey:e.studentsS.phoneNumber},null,8,["modelValue","accesskey"])])):(a(),S("div",Zt,[i("div",Xt,[t(N,{outlined:"",modelValue:e.studentsS.barcode,"onUpdate:modelValue":s[17]||(s[17]=r=>e.studentsS.barcode=r),placeholder:"Hard Copy Barcode",onChange:s[18]||(s[18]=r=>e.studentsS.search(!0))},{prepend:l(()=>[t(z,{name:"fa-solid fa-barcode",color:"primary"})]),default:l(()=>[t(h,{flat:"",color:"primary",icon:"fa-solid fa-magnifying-glass",onClick:s[16]||(s[16]=r=>e.studentsS.search(!0))})]),_:1},8,["modelValue"])]),_t,i("div",xt,[t(N,{autofocus:"",class:"col",outlined:"",maxlength:"20",modelValue:e.studentsS.phoneNumber,"onUpdate:modelValue":s[20]||(s[20]=r=>e.studentsS.phoneNumber=r),placeholder:"Mobile Barcode / Phone Number",onChange:s[21]||(s[21]=r=>e.studentsS.search(!1))},{prepend:l(()=>[t(z,{name:"fa-solid fa-phone",color:"primary"})]),default:l(()=>[t(h,{flat:"",icon:"fa-solid fa-magnifying-glass",onClick:s[19]||(s[19]=r=>e.studentsS.search(!1))})]),_:1},8,["modelValue"]),e.studentsS.phoneNumber.length!=0&&e.studentsS.phoneNumber.length<11?(a(),S("div",es,m(e.t("phone number must be 11 character at least")),1)):y("",!0)])]))])),e.studentsS.showEditBarcodeForm?(a(),S("div",ts,[t(v,{modelValue:e.studentsS.showEditBarcodeForm,"onUpdate:modelValue":s[22]||(s[22]=r=>e.studentsS.showEditBarcodeForm=r),onCancel:s[23]||(s[23]=r=>e.studentsS.showEditBarcodeForm=!1)},null,8,["modelValue"])])):y("",!0),e.studentsS.student!=null&&e.attendanceS.selectedCourse!=null&&((R=e.studentsS.subscription)==null?void 0:R.active)?(a(),f(w,{key:3,student:e.student,course:e.course,subscription:e.subscription},null,8,["student","course","subscription"])):y("",!0),ss,e.studentsS.student!=null&&e.attendanceS.selectedCourse!=null?(a(),f(I,{key:4})):y("",!0)])}var ns=B($t,[["render",ls]]);const os=P({name:"attendance-list",data(){const{locale:e,t:s}=M({useScope:"global"}),c=O(),k=Y(),$=[{label:s("Date"),name:"date",sortable:!0,align:"left",field:o=>o==null?void 0:o.date},{label:s("Course"),name:"course",sortable:!0,align:"left",field:o=>(o==null?void 0:o.course)==null?"error":o.course.name},{label:s("Lesson"),name:"lesson",sortable:!0,align:"left",field:o=>(o==null?void 0:o.lesson)==null?"error":o.lesson.title},{label:s("Group"),name:"group",sortable:!0,align:"left",field:o=>o==null?void 0:o.group},{label:s("Name"),name:"name",sortable:!0,align:"left",field:o=>{var n,u,d;return(o==null?void 0:o.student)==null?"error":(d=(u=(n=o.student)==null?void 0:n.user)==null?void 0:u.profile)==null?void 0:d.name}},{label:s("Mobile"),name:"mobile",sortable:!0,align:"left",field:o=>{var n,u,d;return(o==null?void 0:o.student)==null?"error":(d=(u=(n=o.student)==null?void 0:n.user)==null?void 0:u.profile)==null?void 0:d.phoneNumber}},{label:s("Barcode"),name:"barcode",sortable:!0,align:"left",field:function(o){var n;return(o==null?void 0:o.student)==null?"error":(n=o.student.barcode)!=null?n:"no bar code"}},{label:s("Student Group"),name:"student group",sortable:!0,align:"left",field:function(o){return o==null?void 0:o.student_group}}];return{locale:e,t:s,authS:c,attendanceS:k,filter:"",columns:$}}}),as={class:"row q-mb-sm q-mt-xl q-mx-md"},us={class:"text-h6"},ds={key:0},rs={class:"row"},is=i("th",null,null,-1),ms={key:1};function ps(e,s,c,k,$,o){return a(),S(H,null,[i("div",as,[i("div",us,m(e.t("Attendance Log")),1),t(A)]),e.attendanceS.filteredAttendance!=null?(a(),S("div",ds,[t(le,{class:"q-ma-md",flat:"",bordered:"","row-key":"id",rows:e.attendanceS.attendance,columns:e.columns,filter:e.filter},{"top-right":l(()=>[i("div",rs,[t(N,{dense:"",outlined:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":s[0]||(s[0]=n=>e.filter=n),placeholder:e.t("Search")},{append:l(()=>[t(z,{name:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue","placeholder"]),t(h,{onClick:s[1]||(s[1]=n=>e.filter=""),icon:"fa-solid fa-square-xmark",color:"negative",flat:""}),t(h,{onClick:s[2]||(s[2]=n=>e.attendanceS.getAttendance()),icon:"fa-solid fa-arrows-rotate",color:"positive",flat:""})])]),header:l(n=>[t(Z,{props:n},{default:l(()=>[(a(!0),S(H,null,W(n.cols,u=>(a(),f(te,{key:u.name,props:n,class:"text-bold text-primary"},{default:l(()=>[b(m(u.label),1)]),_:2},1032,["props"]))),128)),is]),_:2},1032,["props"])]),body:l(n=>[t(Z,{props:n},{default:l(()=>[(a(!0),S(H,null,W(n.cols,u=>(a(),f(X,{key:u.name,props:n,onClick:d=>e.filter=u.value},{default:l(()=>[b(m(u.value),1)]),_:2},1032,["props","onClick"]))),128)),t(X,null,{default:l(()=>[t(h,{stack:"",color:"negative",class:"q-ma-sm col-4",label:e.t("Remove Attendance"),icon:"mdi-account-multiple-remove-outline",onClick:u=>e.attendanceS.confirmRemoveAttendance(n.row)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter"])])):(a(),S("div",ms,"no elements"))],64)}var cs=B(os,[["render",ps]]);const fs=P({name:"attendance-list",components:{feesPrintable:ue},data(){const e=O(),{locale:s,t:c}=M({useScope:"global"}),k=J(),$=[{label:c("Date"),name:"date",sortable:!0,align:"left",field:o=>ve(o==null?void 0:o.created_at).format("YYYY-MM-DD hh:mm:ss A")},{label:c("Course"),name:"course",sortable:!0,align:"left",field:o=>{var n,u;return(u=(n=o==null?void 0:o.subscription)==null?void 0:n.course)==null?void 0:u.name}},{label:c("Name"),name:"name",sortable:!0,align:"left",field:o=>{var n,u,d,C;return(C=(d=(u=(n=o==null?void 0:o.subscription)==null?void 0:n.student)==null?void 0:u.user)==null?void 0:d.profile)==null?void 0:C.name}},{label:c("Mobile"),name:"mobile",sortable:!0,align:"left",field:o=>{var n,u,d,C;return(C=(d=(u=(n=o==null?void 0:o.subscription)==null?void 0:n.student)==null?void 0:u.user)==null?void 0:d.profile)==null?void 0:C.phoneNumber}},{label:c("Amount"),name:"paid amount",sortable:!0,align:"left",field:o=>o==null?void 0:o.amount},{label:c("Type"),name:"type",sortable:!0,align:"left",field:o=>o==null?void 0:o.type},{label:c("Notes"),name:"notes",sortable:!0,align:"left",field:o=>o==null?void 0:o.notes}];return{t:c,locale:s,authS:e,feesS:k,columns:$}}}),Ss={class:"row q-mb-sm q-mt-xl q-mx-md"},bs={class:"text-h6"},ys={key:0},vs={class:"row"},hs={key:0},ks={key:1};function gs(e,s,c,k,$,o){const n=U("feesPrintable");return a(),S("div",null,[i("div",Ss,[i("div",bs,m(e.t("Fees Log")),1)]),e.feesS.docs!=null?(a(),S("div",ys,[t(le,{class:"q-ma-md","row-key":"id",flat:"",bordered:"",rows:e.feesS.docs,columns:e.columns,loading:e.feesS.working},{"top-right":l(()=>[i("div",vs,[t(h,{onClick:s[0]||(s[0]=u=>e.feesS.getCurrentCourseFeesTransactions()),icon:"fa-solid fa-arrows-rotate",color:"positive",flat:""})])]),header:l(u=>[t(Z,{props:u},{default:l(()=>[(a(!0),S(H,null,W(u.cols,d=>(a(),f(te,{key:d.name,props:u,class:"text-bold text-primary"},{default:l(()=>[b(m(d.label),1)]),_:2},1032,["props"]))),128)),t(te,{"auto-width":""})]),_:2},1032,["props"])]),body:l(u=>[t(Z,{props:u},{default:l(()=>[(a(!0),S(H,null,W(u.cols,d=>(a(),f(X,{key:d.name,props:u},{default:l(()=>[b(m(d.value),1)]),_:2},1032,["props"]))),128)),t(X,{"auto-width":""},{default:l(()=>{var d;return[t(h,{flat:"",color:"primary",icon:"fa-solid fa-print",onClick:C=>e.feesS.print(u.row)},null,8,["onClick"]),u.row.id==((d=e.feesS.transaction)==null?void 0:d.id)?(a(),S("div",hs,[t(n,{modelValue:e.feesS.showPrintable,"onUpdate:modelValue":s[1]||(s[1]=C=>e.feesS.showPrintable=C)},null,8,["modelValue"])])):y("",!0)]}),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])):(a(),S("div",ks,"no elements"))])}var $s=B(fs,[["render",gs]]);const Cs=P({name:"attendance-create-form",components:{studentSelectionForm:ns,attendanceList:cs,feesList:$s},computed:{lesson(){return this.attendanceS.selectedLesson}},data(){const{locale:e,t:s}=M({useScope:"global"}),c=O(),k=Y(),$=G(),o=J();return{locale:e,t:s,authS:c,attendanceS:k,feesS:o,lessonsS:ge(),homeworkAnswersS:se(),studentsS:$,courseOptions:[]}},mounted(){var e,s;console.log("attendance create form mounted"),this.courseOptions=(s=(e=this.authS.user)==null?void 0:e.courseOptions)!=null?s:[],this.studentsS.selectedSubscription=this.studentsS.subscription}}),ws={key:0},Vs={key:1},qs={class:"row full-width"},Fs={key:0},As=i("br",null,null,-1),Us=i("br",null,null,-1);function Ns(e,s,c,k,$,o){var C,E,L,v;const n=U("studentSelectionForm"),u=U("attendanceList"),d=U("feesList");return e.courseOptions==null?(a(),S("div",ws)):(a(),S("div",Vs,[i("div",qs,[t(T,{outlined:"","use-input":"",label:(C=e.attendanceS.selectedCourse)==null?void 0:C.midTerm,class:"q-my-md q-px-md col-12",modelValue:e.attendanceS.selectedCourse,"onUpdate:modelValue":[s[1]||(s[1]=w=>e.attendanceS.selectedCourse=w),s[2]||(s[2]=w=>e.attendanceS.initSelectedCourse())],"emit-value":"","map-options":"",options:e.courseOptions},{append:l(()=>[e.attendanceS.selectedCourse!==null?(a(),f(z,{key:0,class:"cursor-pointer",name:"clear",onClick:s[0]||(s[0]=x(w=>e.attendanceS.selectedCourse=null,["stop","prevent"]))})):y("",!0)]),"no-option":l(()=>[t(V,null,{default:l(()=>[t(p,{class:"text-grey"},{default:l(()=>[b(" No results ")]),_:1})]),_:1})]),_:1},8,["label","modelValue","options"]),e.attendanceS.selectedCourse!=null?(a(),f(T,{key:0,outlined:"",class:"q-px-md col-6",label:e.t("Lesson"),modelValue:e.attendanceS.selectedLesson,"onUpdate:modelValue":[s[4]||(s[4]=w=>e.attendanceS.selectedLesson=w),s[5]||(s[5]=w=>e.attendanceS.getAttendance())],"emit-value":"","map-options":"",options:e.attendanceS.selectedCourse.lessonOptions},{append:l(()=>[e.attendanceS.selectedLesson!==null?(a(),f(z,{key:0,class:"cursor-pointer",name:"clear",onClick:s[3]||(s[3]=x(w=>e.attendanceS.selectedLesson=null,["stop","prevent"]))})):y("",!0)]),"no-option":l(()=>[t(V,null,{default:l(()=>[t(p,{class:"text-grey"},{default:l(()=>[b(" No results ")]),_:1})]),_:1})]),_:1},8,["label","modelValue","options"])):y("",!0),t(A),e.attendanceS.selectedCourse!=null?(a(),f(T,{key:1,outlined:"",class:"q-px-md col-6",label:e.t("Group"),modelValue:e.attendanceS.selectedGroup,"onUpdate:modelValue":[s[7]||(s[7]=w=>e.attendanceS.selectedGroup=w),s[8]||(s[8]=w=>e.attendanceS.getAttendance())],"emit-value":"","map-options":"",options:e.attendanceS.selectedCourse.groups},{append:l(()=>[e.attendanceS.selectedGroup!==null?(a(),f(z,{key:0,class:"cursor-pointer",name:"clear",onClick:s[6]||(s[6]=x(w=>e.attendanceS.selectedGroup=null,["stop","prevent"]))})):y("",!0)]),"no-option":l(()=>[t(V,null,{default:l(()=>[t(p,{class:"text-grey"},{default:l(()=>[b(" No results ")]),_:1})]),_:1})]),_:1},8,["label","modelValue","options"])):y("",!0)]),e.attendanceS.selectedCourse!=null&&e.attendanceS.selectedGroup!=null&&e.attendanceS.selectedLesson!=null&&e.attendanceS.selectedGroup!=""?(a(),S("div",Fs,[As,t(n),Us,(E=e.attendanceS.selectedLesson.exam)!=null&&E.offline?(a(),f(h,{key:0,class:"q-ma-xl full-width",color:"primary",to:"/exams/"+((L=e.lesson)==null?void 0:L.exam.id)},{default:l(()=>[b("Show Offline Exam")]),_:1},8,["to"])):(a(),f(h,{key:1,class:"q-ma-xl full-width",color:"primary",to:"/courses/"+((v=e.attendanceS.selectedCourse)==null?void 0:v.id)+"/lessons/"+e.attendanceS.selectedLesson.id+"/new-exam"},{default:l(()=>[b("Exam")]),_:1},8,["to"]))])):y("",!0),e.attendanceS.selectedGroup!=null&&e.attendanceS.selectedLesson!=null&&e.attendanceS.selectedCourse!=null&&e.attendanceS.working==!1?(a(),f(u,{key:1})):y("",!0),e.attendanceS.selectedGroup!=null&&e.attendanceS.selectedLesson!=null&&e.attendanceS.selectedCourse!=null&&!e.feesS.working?(a(),f(d,{key:2})):y("",!0)]))}var Es=B(Cs,[["render",Ns]]);const Ds=P({name:"PageIndex",components:{loginForm:be,working:ye,attendanceCreateForm:Es},setup(){return{auth:O()}}}),Qs={key:1},Ps={key:1};function Bs(e,s,c,k,$,o){const n=U("working"),u=U("loginForm"),d=U("attendanceCreateForm");return a(),f(Ae,{class:"q-pa-md"},{default:l(()=>[e.auth.working?(a(),f(n,{key:0})):(a(),S("div",Qs,[e.auth.user==null?(a(),f(u,{key:0})):(a(),S("div",Ps,[t(d)]))]))]),_:1})}var il=B(Ds,[["render",Bs]]);export{il as default};
